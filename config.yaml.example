# Lighter Trend Trader Configuration

api:
  base_url: https://mainnet.zklighter.elliot.ai
  # ⚠️ IMPORTANT: Use a DIFFERENT account than your market making bot!
  # See ACCOUNT_SETUP.md for details. For testing, keep dry_run: true (no account needed)
  key: ""  # Your API key private key (0x...) - MUST be different from market maker bot
  account_index: 0  # Your account index - MUST be different from market maker bot
  api_key_index: 0  # Your API key index - Use a different API key than market maker
  max_api_key_index: null
  nonce_management: null  # OPTIMISTIC or CONSERVATIVE

ws:
  url: wss://mainnet.zklighter.elliot.ai/stream  # WebSocket URL for real-time prices
  auth_token: ""  # Optional: WebSocket auth token (if required)

# RSI + BB Strategy (Trend Following)
mean_reversion:
  enabled: true  # Set to true to enable RSI + BB strategy
  dry_run: false  # Set to false for live trading (TINY SIZE TESTING - 0.001-0.005 SOL)
  market: market:2  # SOL market
  candle_interval_seconds: 15  # Candle timeframe: 10s, 15s, 30s, 60s (smaller = faster iteration, more noise)

  # Optional: Per-strategy account config (for account separation)
  # If not provided, falls back to shared api config above
  # api:
  #   account_index: 281474976639501  # RSI+BB dedicated account
  #   api_key_index: 16
  #   key: ""  # API key private key for this account

  # Indicator parameters (scaled for timeframe)
  ema_fast_period: 8
  ema_slow_period: 21
  bb_period: 20
  bb_std: 2.0
  rsi_period: 14
  atr_period: 14
  volume_ma_period: 20

  # Entry filters (trend following - trades WITH the trend)
  rsi_bullish_threshold: 50.0  # RSI threshold for long entries (RSI > 50 = bullish momentum)
  rsi_bearish_threshold: 50.0  # RSI threshold for short entries (RSI < 50 = bearish momentum)
  rsi_momentum_strength: 10.0  # RSI must be at least this far from 50 (e.g., RSI > 60 for strong bullish)
  bb_position_threshold: 0.3  # Price must be within 30% of BB middle (not at extremes)
  volume_multiplier: 1.2  # Volume must be 1.2x average
  vol_min_bps: 2.0  # Minimum volatility to trade


  vol_max_bps: 25.0  # Maximum volatility to trade (avoid chaos)
  trend_confirmation_bps: 2.0  # Min EMA divergence for trend confirmation (EMA fast > EMA slow)

  # Risk management (optimized for 15s timeframe - 2:1 R/R)
  take_profit_bps: 8.0  # Target profit in basis points (2:1 risk/reward)
  stop_loss_bps: 4.0  # Stop loss in basis points (tighter stops, but wider than before for 15s noise)
  max_hold_minutes: 3  # Maximum time to hold position (reduced for faster timeframe)
  risk_per_trade_pct: 1.0  # Risk 1% of capital per trade
  max_position_size: 0.1  # Maximum SOL per trade (for $100 account, ~$14 notional at ~141 SOL)
  min_position_size: 0.1  # Minimum SOL per trade (ensures minimum notional requirement is met)

# Renko + AO Strategy (Divergence)
renko_ao:
  enabled: true  # Set to true to enable Renko + AO strategy
  dry_run: true  # Set to false for live trading (start with true!)
  market: market:2  # SOL market

  # Optional: Per-strategy account config (for account separation)
  # If not provided, falls back to shared api config above
  # api:
  #   account_index: 281474976639502  # Renko+AO dedicated account (different from RSI+BB)
  #   api_key_index: 17
  #   key: ""  # API key private key for this account

  # Renko parameters (ATR-based)
  renko_atr_period: 14  # ATR period for calculating brick size
  renko_atr_multiplier: 1.3  # ATR multiplier (1.3 = 30% larger bricks for stronger signals)
  renko_lookback: 30  # Number of bricks to look back for divergence detection (increased for better patterns)

  # Awesome Oscillator parameters
  ao_fast_period: 5  # Fast SMA period for AO
  ao_slow_period: 34  # Slow SMA period for AO

  # Bollinger Bands parameters
  bb_period: 20  # Period for BB calculation
  bb_std: 2.0  # Standard deviation multiplier for BB

  # Entry filters (reverted to stricter after bug fix - will relax if needed based on trade frequency)
  bb_enhancement_threshold: 0.3  # Within 30% of BB edge (preferred but optional)
  min_divergence_strength: 0.08  # Minimum divergence strength (balanced selectivity)
  min_ao_strength: 0.15  # AO strength threshold (strong momentum required)
  min_bricks_since_divergence: 4  # At least 4 bricks since divergence (confirmation)
  optimal_atr_min_bps: 3.0  # Minimum ATR in bps (optimal volatility range)
  optimal_atr_max_bps: 8.0  # Maximum ATR in bps (optimal volatility range)

  # Risk management
  take_profit_bps: 10.0  # Target profit in basis points
  stop_loss_bps: 5.0  # Stop loss in basis points
  max_hold_minutes: 5  # Maximum time to hold position
  risk_per_trade_pct: 1.0  # Risk 1% of capital per trade
  max_position_size: 0.1  # Maximum SOL per trade (for $100 account, ~$14 notional at ~141 SOL)
  min_position_size: 0.1  # Minimum SOL per trade (ensures minimum notional requirement is met)

# Breakout + Momentum Strategy
breakout:
  enabled: false  # Set to true to enable Breakout strategy
  dry_run: true  # Set to false for live trading (start with true!)
  market: market:2  # SOL market
  candle_interval_seconds: 900  # 15 minutes (optimal for breakout detection - longer timeframes reduce noise)

  # Optional: Per-strategy account config (for account separation)
  # If not provided, falls back to shared api config above
  # api:
  #   account_index: 281474976639273  # Breakout dedicated account
  #   api_key_index: 17
  #   key: ""  # API key private key for this account

  # Indicator parameters
  ema_fast_period: 20  # 20-period EMA
  ema_slow_period: 50  # 50-period EMA
  rsi_period: 14
  macd_fast: 12
  macd_slow: 26
  macd_signal: 9
  atr_period: 14
  bb_period: 20
  bb_std: 2.0
  breakout_lookback: 30  # Number of candles to look back for recent high/low

  # Entry filters
  rsi_bullish_threshold: 60.0  # RSI >60 for long entries
  rsi_bearish_threshold: 40.0  # RSI <40 for short entries
  atr_min_bps: 3.0  # Minimum volatility (3 bps)
  atr_max_bps: 15.0  # Maximum volatility (15 bps)
  min_atr_expansion: 1.1  # ATR must be 10% higher than recent average

  # Risk management (ATR-based)
  take_profit_atr_multiplier: 2.5  # Take profit at 2.5x ATR
  stop_loss_atr_multiplier: 1.5  # Stop loss at 1.5x ATR below/above breakout level
  trailing_stop_activation_atr: 1.0  # Activate trailing after 1x ATR profit
  trailing_stop_distance_atr: 0.5  # Trail by 0.5x ATR
  max_hold_minutes: 60  # Maximum time to hold position (60 minutes)
  no_movement_minutes: 30  # Exit if no progress after 30 minutes

  # Position sizing
  max_position_size: 0.1  # Maximum SOL per trade
  min_position_size: 0.1  # Minimum SOL per trade

# PnL Database & Backup Configuration
pnl_backup:
  enabled: true  # Enable periodic backups (safety net)
  interval_seconds: 3600  # Backup interval (1 hour default)

  # Option 1: Local backup (to persistent volume) - RECOMMENDED
  local_path: /data/backups  # Path to backup directory (must be on persistent volume)
  max_backups: 10  # Keep last N backups

  # Option 2: S3 backup (uncomment to use)
  # s3:
  #   bucket: your-bucket-name
  #   key_prefix: pnl_backups/
  #   endpoint_url: https://s3.amazonaws.com  # Or MinIO URL
  #   region: us-east-1
  #   # Credentials from env: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY

  # Option 3: Webhook backup (uncomment to use)
  # webhook_url: https://your-api.com/trades

